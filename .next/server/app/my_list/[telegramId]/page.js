(()=>{var e={};e.id=878,e.ids=[878],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},29164:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o}),t(66649),t(32029),t(35866);var r=t(23191),a=t(88716),i=t(37922),l=t.n(i),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let o=["",{children:["my_list",{children:["[telegramId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,66649)),"D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\my_list\\[telegramId]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\my_list\\[telegramId]\\page.tsx"],m="/my_list/[telegramId]/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/my_list/[telegramId]/page",pathname:"/my_list/[telegramId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},68080:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},95528:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,44064,23))},46316:(e,s,t)=>{Promise.resolve().then(t.bind(t,49762)),Promise.resolve().then(t.bind(t,24491))},49762:(e,s,t)=>{"use strict";t.d(s,{default:()=>a});var r=t(10326);t(17577);let a=({children:e})=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"max-w-[2520px] min-h-screen mx-auto xl:px-20 md:px-10 sm:px-2 px-4",children:e})})},89500:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(17577);let a=()=>{let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(),[i,l]=(0,r.useState)(!0),[n,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=window.Telegram.WebApp;e.ready();let t=e.initDataUnsafe?.user;if(t){s(t);let e="6874087551:AAHHCPMYy9JXgHVBavUdce_YjoXWgd0Fuew";fetch(`https://api.telegram.org/bot${e}/getUserProfilePhotos?user_id=${t.id}`).then(e=>{if(!e.ok)throw Error("Ошибка получения данных от Telegram API");return e.json()}).then(s=>{if(s?.result?.photos?.length>0){let t=s.result.photos[0][0].file_id;return fetch(`https://api.telegram.org/bot${e}/getFile?file_id=${t}`)}throw Error("Фотографии профиля не найдены")}).then(e=>{if(!e.ok)throw Error("Ошибка получения файла с Telegram API");return e.json()}).then(s=>{if(s?.result?.file_path)a(`https://api.telegram.org/file/bot${e}/${s.result.file_path}`);else throw Error("Путь к файлу не найден")}).catch(e=>{console.error("Ошибка получения фото профиля:",e),c(e.message),a("/placeholder-image.jpg")}).finally(()=>l(!1))}else l(!1)},[]),{telegram_user:e,userPhoto:t,loading:i,error:n}}},24491:(e,s,t)=>{"use strict";t.d(s,{default:()=>u});var r=t(10326),a=t(89500),i=t(41711),l=t(11298),n=t(25605),c=t(62811),o=t(35047),d=t(17577),m=t(44046),p=t(94835),x=t(31190);t(45996);let u=({appointment:e})=>{let s=(0,o.useRouter)(),{telegram_user:t,userPhoto:u}=(0,a.Z)(),[h,g]=(0,d.useState)(e||[]),[j,f]=(0,d.useState)(!1),[b,v]=(0,d.useState)(""),[N,P]=(0,d.useState)(null);(0,d.useEffect)(()=>{let t=window.Telegram.WebApp;t.ready(),t.BackButton.show(),t.BackButton.onClick(()=>s.push("/")),t.MainButton.hide(),e&&e.length>0&&g([...e].reverse())},[e]);let w=async()=>{if(!b.trim()){x.Am.error("Пожалуйста, укажите причину отмены");return}if(null!==N)try{(await fetch(`/api/appointments?id=${N}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:b})})).ok?(g(e=>e.filter(e=>e.id!==N)),x.Am.success("Запись успешно отменена"),f(!1)):x.Am.error("Не удалось отменить запись")}catch(e){console.error("Ошибка при отмене записи:",e),x.Am.error("Произошла ошибка при отмене записи")}},y=e=>{P(e),v(""),f(!0)};return(0,r.jsxs)(r.Fragment,{children:[r.jsx(x.Ix,{}),r.jsx(i.Z,{title:"Причина отмены",visible:j,onOk:w,onCancel:()=>f(!1),okText:"Подтвердить",cancelText:"Отмена",children:r.jsx(l.Z,{value:b,onChange:e=>v(e.target.value),placeholder:"Введите причину отмены"})}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2",children:r.jsx(n.C,{src:u,size:48})}),r.jsx("div",{className:"pl-2 font-medium",children:t?.first_name})]}),r.jsx("div",{className:"pr-2",children:r.jsx(c.Z,{width:150,src:"/logo.svg"})})]}),(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white shadow-md rounded-lg p-6",children:[(0,r.jsxs)("div",{className:" border-b pb-4",children:[r.jsx("h2",{className:"text-xl pb-2 font-normal",children:"Мои записи"}),r.jsx("span",{className:"text-sm",children:"Актуальные и прошедшие записи"})]}),r.jsx("div",{children:h&&h.length>0?h.map(e=>(0,r.jsxs)("div",{className:"mt-4 p-4 border-b",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(p.FFD,{size:24,className:"bg-blue-500 p-1 rounded-lg mr-2",color:"white"}),r.jsx("div",{className:"mr-2",children:"Дата:"}),r.jsx("span",{className:"font-semibold",children:e.date})]}),(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(p.iNe,{size:24,className:"bg-red-500 p-1 rounded-lg mr-2",color:"white"}),r.jsx("div",{className:"mr-2",children:"Время:"}),r.jsx("span",{className:"font-semibold",children:e.time})]}),e.specialistPrice&&(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(p.DkQ,{size:24,className:"bg-green-500 p-1 rounded-lg mr-2",color:"white"}),r.jsx("div",{className:"mr-2",children:"Цена:"}),(0,r.jsxs)("span",{className:"font-semibold",children:[e.specialistPrice," ₽"]})]}),e.specialistCategory&&(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.dwX,{size:24,className:"bg-orange-500 p-1 rounded-lg mr-2",color:"white"}),r.jsx("div",{className:"mr-2",children:"Категория:"}),r.jsx("span",{className:"font-semibold",children:e.specialistCategory})]})]}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(p.Vyx,{size:24,className:"bg-blue-500 p-1 rounded-lg mr-2",color:"white"}),r.jsx("div",{className:"mr-2",children:"Мастер:"}),(0,r.jsxs)("span",{className:"font-semibold",children:[e.specialistName," ",e.specialistLastName]})]}),(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(p.IXo,{size:24,className:"bg-red-500 p-1 rounded-lg mr-2",color:"white"}),r.jsx("div",{className:"mr-2",children:"Телефон:"}),r.jsx("span",{className:"font-semibold",children:e.specialistPhone})]}),e.specialistAddress&&(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(p.$0r,{size:24,className:"bg-orange-500 p-1 rounded-lg mr-2",color:"white"}),r.jsx("div",{className:"mr-2",children:"Адрес:"}),r.jsx("span",{className:"font-semibold",children:e.specialistAddress})]})]}),(0,r.jsxs)("div",{className:"flex justify-center",children:[r.jsx("div",{className:"text-center pt-2 mt-2",children:r.jsx("button",{onClick:()=>s.push(`/perezapis/${e.id}`),className:"bg-green-500 rounded-full px-5 py-3 mt-4 text-white text-sm",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(m.ffH,{className:"mr-2"}),"Перезаписать"]})})}),r.jsx("div",{className:"text-center pt-2 mt-2 ml-4",children:r.jsx("button",{onClick:()=>y(e.id),className:"bg-red-500 rounded-full px-9 py-3 mt-4 text-white text-sm",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.xg7,{className:"mr-2"}),"Отменить"]})})})]})]},e.id)):r.jsx("p",{className:"text-center",children:"Записей нет"})})]})]})}},92681:(e,s,t)=>{"use strict";t.d(s,{s:()=>a});let r=new(t(53524)).PrismaClient;async function a(e){try{return await r.appointments.findMany({where:{clientId:e}})}catch(e){return console.error("Ошибка при загрузке графика специалиста:",e),null}}},84443:(e,s,t)=>{"use strict";t.d(s,{ZP:()=>n});var r=t(68570);let a=(0,r.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\components\Container.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let n=(0,r.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\components\Container.tsx#default`)},32029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>n});var r=t(19510),a=t(25384),i=t.n(a);t(5023),t(83952);var l=t(9720);let n={title:"Create Next App",description:"Generated by create next app"};function c({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[(0,r.jsxs)("head",{children:[r.jsx(l.default,{strategy:"beforeInteractive",src:"https://telegram.org/js/telegram-web-app.js"}),r.jsx(l.default,{strategy:"beforeInteractive",src:"https://cdn.jsdelivr.net/npm/eruda"})]}),r.jsx("body",{className:i().className,children:r.jsx("div",{className:"pb-6 pt-6 bg-slate-100",children:e})})]})}},66649:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(19510),a=t(84443);t(71159);var i=t(92681),l=t(68570);let n=(0,l.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\my_list\[telegramId]\client.tsx`),{__esModule:c,$$typeof:o}=n;n.default;let d=(0,l.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\my_list\[telegramId]\client.tsx#default`);async function m({params:e}){let s=await (0,i.s)(e.telegramId);return r.jsx(a.ZP,{children:r.jsx(d,{appointment:s})})}},73881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,206,339,835,703,689,46,711,298],()=>t(29164));module.exports=r})();