(()=>{var e={};e.id=345,e.ids=[345],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},41673:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(61819),s(32029),s(35866);var r=s(23191),i=s(88716),a=s(37922),l=s.n(a),n=s(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["profile",{children:["[userId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,61819)),"D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\profile\\[userId]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\profile\\[userId]\\page.tsx"],p="/profile/[userId]/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/profile/[userId]/page",pathname:"/profile/[userId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},68080:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},95528:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,44064,23))},48428:(e,t,s)=>{Promise.resolve().then(s.bind(s,61014))},49762:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(10326);s(17577);let i=({children:e})=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"max-w-[2520px] min-h-screen mx-auto xl:px-20 md:px-10 sm:px-2 px-4",children:e})})},61014:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var r=s(10326),i=s(49762),a=s(41711),l=s(25605),n=s(62811),o=s(35047),c=s(17577),d=s(44046),p=s(47100),u=s(94835),m=s(31190);s(45996);let x=({user:e,grafik:t})=>{let[s,x]=(0,c.useState)(),[h,f]=(0,c.useState)(e.status),[g,j]=(0,c.useState)(!1),v=(0,o.useRouter)();(0,c.useEffect)(()=>{let t=window.Telegram.WebApp;if(t.ready(),t.BackButton.show(),t.BackButton.onClick(()=>v.push("/")),t.MainButton.show(),t.MainButton.setText("Изменить профиль"),t.MainButton.onClick(()=>v.push(`/formSpecialist/${e.userId}`)),e){let t="6874087551:AAHHCPMYy9JXgHVBavUdce_YjoXWgd0Fuew";fetch(`https://api.telegram.org/bot${t}/getUserProfilePhotos?user_id=${e.userId}`).then(e=>{if(!e.ok)throw Error("Ошибка получения данных от Telegram API");return e.json()}).then(e=>{if(e?.result?.photos?.length>0){let s=e.result.photos[0][0].file_id;return fetch(`https://api.telegram.org/bot${t}/getFile?file_id=${s}`)}throw Error("Фотографии профиля не найдены")}).then(e=>{if(!e?.ok)throw Error("Ошибка получения файла с Telegram API");return e.json()}).then(e=>{if(e?.result?.file_path)x(`https://api.telegram.org/file/bot${t}/${e.result.file_path}`);else throw Error("Путь к файлу не найден")}).catch(e=>{console.error("Ошибка получения фото профиля:",e),x("/placeholder-image.jpg")})}},[e]);let b=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"];return(0,r.jsxs)(i.default,{children:[(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2",children:r.jsx(l.C,{src:s||"/placeholder-image.jpg",size:48})}),r.jsx("div",{className:"pl-2 font-medium",children:e?.firstName})]}),r.jsx("div",{className:"pr-2",children:r.jsx(n.Z,{width:150,src:"/logo.svg",alt:"Логотип"})})]}),r.jsx(m.Ix,{}),(0,r.jsxs)("div",{className:"bg-blue-200 mt-4 p-2 border-l-4 border-blue-500  flex flex-row justify-between",children:[r.jsx("span",{className:"text-sm text-blue-500",children:h}),r.jsx(d.ffH,{size:24,className:"bg-blue-500 rounded-lg p-1 mr-2",color:"white",onClick:()=>{a.Z.info({title:"Введите статус",content:r.jsx("div",{children:r.jsx("form",{id:"statusForm",children:r.jsx("input",{type:"text",id:"status",className:"border-2 border-gray-300 p-2 rounded-lg w-full",placeholder:"Отпуск с 1 по 10 января"})})}),onOk:async()=>{let t=document.getElementById("status"),s=t?.value;if(s)try{(await fetch("/api/updateStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,status:s})})).ok?(f(s),m.Am.success("Статус успешно обновлен")):m.Am.error("Статус не обновлен")}catch(e){console.error("Ошибка при отправке запроса:",e)}}})}})]}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg flex flex-col mt-4",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[r.jsx("div",{className:"p-2",children:r.jsx(l.C,{className:"border-2 border-orange-500",src:s,size:100})}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"text-xl font-semibold",children:[e.firstName," ",e.lastName]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(u.X_f,{size:24,className:"bg-cyan-500 rounded-lg p-1 mr-2",color:"white"}),r.jsx("div",{className:"text-cyan-500",children:e.phone})]}),r.jsx("div",{className:"text-sm font-light mb-2",children:e.address})]})]}),r.jsx("div",{className:"pl-2 font-semibold",children:e.category}),r.jsx("div",{className:"text-wrap mt-4 pl-2",children:e.description?.split("\n").map((e,t)=>r.jsx("p",{children:e},t))}),(0,r.jsxs)("div",{className:" mt-4 p-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>{j(!g)},children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.IiJ,{size:32,className:"bg-red-500 rounded-lg p-1",color:"white"}),r.jsx("span",{className:"ml-2 font-semibold",children:"График работы"})]}),g?r.jsx(u.rWj,{size:24}):r.jsx(u.Ix0,{size:24})]}),g&&t&&t.length>0&&r.jsx("div",{className:"flex items-center text-right mt-2",children:r.jsx("ul",{className:"list-none m-0 p-0",children:t.map((e,t)=>(0,r.jsxs)("li",{children:[b[e.dayOfWeek],": ",e.startTime," -"," ",e.endTime]},t))})})]}),(0,r.jsxs)("div",{className:" flex items-center justify-between mt-4 p-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.R_H,{size:32,className:"bg-green-500 rounded-lg p-1",color:"white"}),r.jsx("span",{className:"ml-2 font-semibold",children:"Стоимость"})]}),(0,r.jsxs)("div",{children:[e.price," руб."]})]})]})]})}},59055:(e,t,s)=>{"use strict";s.d(t,{W:()=>i});let r=new(s(53524)).PrismaClient;async function i(e){try{return await r.timeSlots.findMany({where:{specialistId:e}})}catch(e){return console.error("Ошибка при загрузке графика специалиста:",e),null}}},58873:(e,t,s)=>{"use strict";s.d(t,{x:()=>i});let r=new(s(53524)).PrismaClient;async function i(e){try{return await r.specialist.findFirst({where:{userId:e}})}catch(e){return console.error("Ошибка при загрузке графика специалиста:",e),null}}},32029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>n});var r=s(19510),i=s(25384),a=s.n(i);s(5023),s(83952);var l=s(9720);let n={title:"Create Next App",description:"Generated by create next app"};function o({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[(0,r.jsxs)("head",{children:[r.jsx(l.default,{strategy:"beforeInteractive",src:"https://telegram.org/js/telegram-web-app.js"}),r.jsx(l.default,{strategy:"beforeInteractive",src:"https://cdn.jsdelivr.net/npm/eruda"})]}),r.jsx("body",{className:a().className,children:r.jsx("div",{className:"pb-6 pt-6 bg-slate-100",children:e})})]})}},61819:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(19510),i=s(59055),a=s(68570);let l=(0,a.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\profile\[userId]\client.tsx`),{__esModule:n,$$typeof:o}=l;l.default;let c=(0,a.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\profile\[userId]\client.tsx#default`);var d=s(58873);let p=async({params:e})=>{let t=await (0,d.x)(e.userId),s=await (0,i.W)(e.userId);return t?r.jsx(c,{user:t,grafik:s}):r.jsx("div",{children:"Пользователь не найден"})}},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(66621);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,206,339,835,703,689,46,100,711],()=>s(41673));module.exports=r})();