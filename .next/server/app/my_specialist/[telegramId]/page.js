(()=>{var e={};e.id=354,e.ids=[354],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},87751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c}),r(29061),r(32029),r(35866);var s=r(23191),a=r(88716),i=r(37922),l=r.n(i),n=r(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["my_specialist",{children:["[telegramId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,29061)),"D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\my_specialist\\[telegramId]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Projects\\NEWWEBAPPTELEGA\\web-app\\src\\app\\my_specialist\\[telegramId]\\page.tsx"],p="/my_specialist/[telegramId]/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/my_specialist/[telegramId]/page",pathname:"/my_specialist/[telegramId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},68080:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},95528:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,44064,23))},80503:(e,t,r)=>{Promise.resolve().then(r.bind(r,49762)),Promise.resolve().then(r.bind(r,35033))},49762:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(10326);r(17577);let a=({children:e})=>s.jsx(s.Fragment,{children:s.jsx("div",{className:"max-w-[2520px] min-h-screen mx-auto xl:px-20 md:px-10 sm:px-2 px-4",children:e})})},89500:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(17577);let a=()=>{let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(),[i,l]=(0,s.useState)(!0),[n,o]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=window.Telegram.WebApp;e.ready();let r=e.initDataUnsafe?.user;if(r){t(r);let e="6874087551:AAHHCPMYy9JXgHVBavUdce_YjoXWgd0Fuew";fetch(`https://api.telegram.org/bot${e}/getUserProfilePhotos?user_id=${r.id}`).then(e=>{if(!e.ok)throw Error("Ошибка получения данных от Telegram API");return e.json()}).then(t=>{if(t?.result?.photos?.length>0){let r=t.result.photos[0][0].file_id;return fetch(`https://api.telegram.org/bot${e}/getFile?file_id=${r}`)}throw Error("Фотографии профиля не найдены")}).then(e=>{if(!e.ok)throw Error("Ошибка получения файла с Telegram API");return e.json()}).then(t=>{if(t?.result?.file_path)a(`https://api.telegram.org/file/bot${e}/${t.result.file_path}`);else throw Error("Путь к файлу не найден")}).catch(e=>{console.error("Ошибка получения фото профиля:",e),o(e.message),a("/placeholder-image.jpg")}).finally(()=>l(!1))}else l(!1)},[]),{telegram_user:e,userPhoto:r,loading:i,error:n}}},35033:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(10326),a=r(89500),i=r(25605),l=r(62811),n=r(35047),o=r(17577),c=r(94835);let d=({appointment:e})=>{let[t,r]=(0,o.useState)([]),[d,p]=(0,o.useState)([]),m=(0,n.useRouter)(),{telegram_user:u,userPhoto:h,loading:x,error:g}=(0,a.Z)();return(0,o.useEffect)(()=>{let t=window.Telegram.WebApp;t.ready(),t.BackButton.show(),t.BackButton.onClick(()=>m.push("/")),t.MainButton.hide(),e&&(async()=>{let t=Array.from(new Set(e.map(e=>e.specialistId)));p(t),r(await Promise.all(t.map(async e=>{let t=await fetch("/api/getSpecialist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({specialistId:e})}),r=await t.json(),s="6874087551:AAHHCPMYy9JXgHVBavUdce_YjoXWgd0Fuew";try{let t=await fetch(`https://api.telegram.org/bot${s}/getUserProfilePhotos?user_id=${e}`);if(t.ok){let e=await t.json();if(e?.result?.photos?.length>0){let t=e.result.photos[0][0].file_id,a=await fetch(`https://api.telegram.org/bot${s}/getFile?file_id=${t}`);if(a.ok){let e=await a.json();e?.result?.file_path&&(r.photoUrl=`https://api.telegram.org/file/bot${s}/${e.result.file_path}`)}}}}catch(e){console.error("Ошибка получения фото профиля:",e),r.photoUrl="/placeholder-image.jpg"}return r})))})()},[e]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2",children:s.jsx(i.C,{src:h,size:48})}),s.jsx("div",{className:"pl-2 font-medium",children:u?.first_name})]}),s.jsx("div",{className:"pr-2",children:s.jsx(l.Z,{width:150,src:"/logo.svg"})})]}),(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-white shadow-md rounded-lg p-6",children:[(0,s.jsxs)("div",{className:" border-b pb-4",children:[s.jsx("h2",{className:"text-xl font-normal pb-2",children:"Мои специалисты"}),s.jsx("span",{className:"text-sm ",children:"Список специалистов для повторной записи"})]}),s.jsx("div",{children:t.length>0&&e?t.map((e,t)=>s.jsx("div",{className:" mt-4",onClick:()=>m.push(`/profile_zapis/${d[t]}`),children:(0,s.jsxs)("div",{className:"flex items-center border-b p-2 justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-row space-x-4",children:[s.jsx(i.C,{src:e.photoUrl||"/placeholder-image.jpg",size:84}),(0,s.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,s.jsxs)("div",{className:"text-md font-semibold",children:[e.firstName," ",e.lastName]}),s.jsx("div",{className:"text-sm text-red-500",children:e.category})]})]}),s.jsx("div",{children:s.jsx(c.KEG,{})})]})},d[t])):s.jsx("p",{className:"text-center",children:"Записей нет"})})]})]})}},92681:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});let s=new(r(53524)).PrismaClient;async function a(e){try{return await s.appointments.findMany({where:{clientId:e}})}catch(e){return console.error("Ошибка при загрузке графика специалиста:",e),null}}},84443:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>n});var s=r(68570);let a=(0,s.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\components\Container.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let n=(0,s.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\components\Container.tsx#default`)},32029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>n});var s=r(19510),a=r(25384),i=r.n(a);r(5023),r(83952);var l=r(9720);let n={title:"Create Next App",description:"Generated by create next app"};function o({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)("head",{children:[s.jsx(l.default,{strategy:"beforeInteractive",src:"https://telegram.org/js/telegram-web-app.js"}),s.jsx(l.default,{strategy:"beforeInteractive",src:"https://cdn.jsdelivr.net/npm/eruda"})]}),s.jsx("body",{className:i().className,children:s.jsx("div",{className:"pb-6 pt-6 bg-slate-100",children:e})})]})}},29061:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(19510),a=r(84443);r(71159);var i=r(68570);let l=(0,i.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\my_specialist\[telegramId]\client.tsx`),{__esModule:n,$$typeof:o}=l;l.default;let c=(0,i.createProxy)(String.raw`D:\Projects\NEWWEBAPPTELEGA\web-app\src\app\my_specialist\[telegramId]\client.tsx#default`);var d=r(92681);async function p({params:e}){let t=await (0,d.s)(e.telegramId);return s.jsx(a.ZP,{children:s.jsx(c,{appointment:t})})}},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,206,339,835,703],()=>r(87751));module.exports=s})();