(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{54973:function(e,t,n){Promise.resolve().then(n.bind(n,62472))},16463:function(e,t,n){"use strict";var s=n(71169);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},92119:function(e,t,n){"use strict";var s=n(57437);n(2265),t.default=e=>{let{children:t}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"max-w-[2520px] min-h-screen mx-auto xl:px-20 md:px-10 sm:px-2 px-4",children:t})})}},62472:function(e,t,n){"use strict";var s=n(57437),o=n(92119),a=n(29057),l=n(16463),r=n(2265),i=n(23580);n(44193),t.default=e=>{let{user:t}=e,n=(0,l.useRouter)(),[c,u]=(0,r.useState)({firstName:t.firstName||"",lastName:t.lastName||"",price:t.price||"",phone:t.phone||"",address:t.address||"",category:t.category||"",description:t.description||"",userId:t.userId}),d=e=>{let{name:t,value:n}=e.target;u({...c,[t]:n})},m=async e=>{e.preventDefault();try{(await fetch("/api/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok?(i.Am.success("Профиль успешно обновлен"),n.refresh()):i.Am.error("Ошибка при обновлении профиля")}catch(e){i.Am.error("Произошла ошибка")}};return(0,r.useEffect)(()=>{u({firstName:t.firstName||"",lastName:t.lastName||"",price:t.price||"",phone:t.phone||"",address:t.address||"",category:t.category||"",description:t.description||"",userId:t.userId})},[t]),(0,r.useEffect)(()=>{let e=window.Telegram.WebApp;e.ready(),e.BackButton.show,e.BackButton.onClick(()=>n.push("/profile/".concat(t.userId)))},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.c7,{text:"Сохранить профиль",onClick:()=>m(new Event("submit"))}),(0,s.jsx)(o.default,{children:(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-4 flex flex-col text-xl",children:["Редактирование профиля",(0,s.jsx)("span",{className:"text-sm mt-2 border-b pb-4",children:"Основные данные отображаются сразу при загрузке вашего профиля"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(i.Ix,{}),(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsxs)("div",{className:"mb-4 mt-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-normal mb-2",htmlFor:"firstName",children:"Имя"}),(0,s.jsx)("input",{id:"firstName",name:"firstName",type:"text",placeholder:"Введите имя",value:c.firstName,onChange:d,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm"})]}),(0,s.jsxs)("div",{className:"mb-4 mt-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-normal mb-2",htmlFor:"lastName",children:"Фамилия"}),(0,s.jsx)("input",{id:"lastName",name:"lastName",type:"text",placeholder:"Введите фамилию",value:c.lastName,onChange:d,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm"})]}),(0,s.jsxs)("div",{className:"mb-4 mt-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-normal mb-2",htmlFor:"price",children:"Цена (руб.)"}),(0,s.jsx)("input",{id:"price",name:"price",type:"text",placeholder:"1000",value:c.price,onChange:d,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm"})]}),(0,s.jsxs)("div",{className:"mb-4 mt-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-normal mb-2",htmlFor:"phone",children:"Телефон"}),(0,s.jsx)("input",{id:"phone",name:"phone",type:"tel",placeholder:"+79202002020",value:c.phone,onChange:d,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm"})]}),(0,s.jsxs)("div",{className:"mb-4 mt-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-normal mb-2",htmlFor:"category",children:"Категория"}),(0,s.jsx)("input",{id:"category",name:"category",type:"text",placeholder:"Парикмахер",value:c.category,onChange:d,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm"})]}),(0,s.jsxs)("div",{className:"mb-4 mt-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-normal mb-2",htmlFor:"address",children:"Адрес"}),(0,s.jsx)("input",{id:"address",name:"address",type:"text",placeholder:"г. Москва, ул. Пушкина д.15, оф.1",value:c.address,onChange:d,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm"})]}),(0,s.jsxs)("div",{className:"mb-4 mt-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-normal mb-2",htmlFor:"description",children:"Описание"}),(0,s.jsx)("textarea",{id:"description",name:"description",placeholder:"Расскажите о себе",value:c.description,onChange:d,className:"shadow appearance-none border rounded w-full py-4 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm"})]})]})]})]})})]})}},29057:function(e,t,n){"use strict";n.d(t,{c7:function(){return d},xE:function(){return m}});var s,o=n(2265);let a=(0,o.createContext)("undefined"!=typeof window&&null!=(s=window)&&null!=(s=s.Telegram)&&s.WebApp?window.Telegram.WebApp:null),l=(0,o.createContext)({smoothButtonsTransition:!1,smoothButtonsTransitionMs:10}),r=(0,o.createContext)({MainButton:{current:null},BackButton:{current:null}}),i=()=>{},c=({id:e,show:t=i,hide:n=i,currentShowedIdRef:s})=>{let{smoothButtonsTransition:a,smoothButtonsTransitionMs:r}=(0,o.useContext)(l);(0,o.useEffect)(()=>(t(),s.current=e,()=>{a?(s.current=null,setTimeout(()=>{s.current||n()},r)):(n(),s.current=null)}),[n,e,s,t,a,r])},u=()=>(0,o.useContext)(a),d=({text:e="CONTINUE",progress:t=!1,disable:n,disabled:s=!1,color:a,textColor:l,onClick:i})=>{let d=(0,o.useContext)(r),m=(0,o.useId)(),h=u(),x=null==h?void 0:h.MainButton,p=null==h?void 0:h.themeParams,f=n||s;return(0,o.useEffect)(()=>{null==x||x.setParams({color:a||(null==p?void 0:p.button_color)||"#fff"})},[a,p,x]),(0,o.useEffect)(()=>{null==x||x.setParams({text_color:l||(null==p?void 0:p.button_text_color)||"#000"})},[x,p,l]),(0,o.useEffect)(()=>{null==x||x.setText(e)},[e,x]),(0,o.useEffect)(()=>{f?null==x||x.disable():f||null==x||x.enable()},[f,x]),(0,o.useEffect)(()=>{t?null==x||x.showProgress(!1):t||null==x||x.hideProgress()},[t,x]),(0,o.useEffect)(()=>{if(i)return null==x||x.onClick(i),()=>{null==x||x.offClick(i)}},[i,x]),c({show:null==x?void 0:x.show,hide:null==x?void 0:x.hide,currentShowedIdRef:d.MainButton,id:m}),null},m=({onClick:e})=>{let t=(0,o.useContext)(r),n=(0,o.useId)(),s=u(),a=null==s?void 0:s.BackButton;return(0,o.useEffect)(()=>{if(e&&a)return a.onClick(e),()=>{a.offClick(e)}},[e,a]),c({show:null==a?void 0:a.show,hide:null==a?void 0:a.hide,currentShowedIdRef:t.BackButton,id:n}),null}}},function(e){e.O(0,[143,127,971,23,744],function(){return e(e.s=54973)}),_N_E=e.O()}]);