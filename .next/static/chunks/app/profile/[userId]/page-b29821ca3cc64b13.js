(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{42462:function(e,s,t){Promise.resolve().then(t.bind(t,53144))},92119:function(e,s,t){"use strict";var l=t(57437);t(2265),s.default=e=>{let{children:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"max-w-[2520px] min-h-screen mx-auto xl:px-20 md:px-10 sm:px-2 px-4",children:s})})}},53144:function(e,s,t){"use strict";var l=t(57437),i=t(92119),r=t(48769),a=t(9851),n=t(61572),c=t(16463),o=t(2265),d=t(41942),m=t(19675),h=t(16356),x=t(23580);t(44193),s.default=e=>{var s;let{user:t,grafik:u}=e,[f,p]=(0,o.useState)(),[j,v]=(0,o.useState)(t.status),[g,N]=(0,o.useState)(!1),b=(0,c.useRouter)();(0,o.useEffect)(()=>{let e=window.Telegram.WebApp;if(e.ready(),e.BackButton.show(),e.BackButton.onClick(()=>b.push("/")),e.MainButton.show(),e.MainButton.setText("Изменить профиль"),e.MainButton.onClick(()=>b.push("/formSpecialist/".concat(t.userId))),t){let e="6874087551:AAHHCPMYy9JXgHVBavUdce_YjoXWgd0Fuew";fetch("https://api.telegram.org/bot".concat(e,"/getUserProfilePhotos?user_id=").concat(t.userId)).then(e=>{if(!e.ok)throw Error("Ошибка получения данных от Telegram API");return e.json()}).then(s=>{var t,l;if((null==s?void 0:null===(l=s.result)||void 0===l?void 0:null===(t=l.photos)||void 0===t?void 0:t.length)>0){let t=s.result.photos[0][0].file_id;return fetch("https://api.telegram.org/bot".concat(e,"/getFile?file_id=").concat(t))}throw Error("Фотографии профиля не найдены")}).then(e=>{if(!(null==e?void 0:e.ok))throw Error("Ошибка получения файла с Telegram API");return e.json()}).then(s=>{var t;if(null==s?void 0:null===(t=s.result)||void 0===t?void 0:t.file_path)p("https://api.telegram.org/file/bot".concat(e,"/").concat(s.result.file_path));else throw Error("Путь к файлу не найден")}).catch(e=>{console.error("Ошибка получения фото профиля:",e),p("/placeholder-image.jpg")})}},[t]);let w=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"];return(0,l.jsxs)(i.default,{children:[(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2",children:(0,l.jsx)(a.C,{src:f||"/placeholder-image.jpg",size:48})}),(0,l.jsx)("div",{className:"pl-2 font-medium",children:null==t?void 0:t.firstName})]}),(0,l.jsx)("div",{className:"pr-2",children:(0,l.jsx)(n.Z,{width:150,src:"/logo.svg",alt:"Логотип"})})]}),(0,l.jsx)(x.Ix,{}),(0,l.jsxs)("div",{className:"bg-blue-200 mt-4 p-2 border-l-4 border-blue-500  flex flex-row justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-blue-500",children:j}),(0,l.jsx)(d.ffH,{size:24,className:"bg-blue-500 rounded-lg p-1 mr-2",color:"white",onClick:()=>{r.Z.info({title:"Введите статус",content:(0,l.jsx)("div",{children:(0,l.jsx)("form",{id:"statusForm",children:(0,l.jsx)("input",{type:"text",id:"status",className:"border-2 border-gray-300 p-2 rounded-lg w-full",placeholder:"Отпуск с 1 по 10 января"})})}),onOk:async()=>{let e=document.getElementById("status"),s=null==e?void 0:e.value;if(s)try{(await fetch("/api/updateStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.userId,status:s})})).ok?(v(s),x.Am.success("Статус успешно обновлен")):x.Am.error("Статус не обновлен")}catch(e){console.error("Ошибка при отправке запроса:",e)}}})}})]}),(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg flex flex-col mt-4",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)("div",{className:"p-2",children:(0,l.jsx)(a.C,{className:"border-2 border-orange-500",src:f,size:100})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsxs)("div",{className:"text-xl font-semibold",children:[t.firstName," ",t.lastName]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.X_f,{size:24,className:"bg-cyan-500 rounded-lg p-1 mr-2",color:"white"}),(0,l.jsx)("div",{className:"text-cyan-500",children:t.phone})]}),(0,l.jsx)("div",{className:"text-sm font-light mb-2",children:t.address})]})]}),(0,l.jsx)("div",{className:"pl-2 font-semibold",children:t.category}),(0,l.jsx)("div",{className:"text-wrap mt-4 pl-2",children:null===(s=t.description)||void 0===s?void 0:s.split("\n").map((e,s)=>(0,l.jsx)("p",{children:e},s))}),(0,l.jsxs)("div",{className:" mt-4 p-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>{N(!g)},children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(d.IiJ,{size:32,className:"bg-red-500 rounded-lg p-1",color:"white"}),(0,l.jsx)("span",{className:"ml-2 font-semibold",children:"График работы"})]}),g?(0,l.jsx)(h.rWj,{size:24}):(0,l.jsx)(h.Ix0,{size:24})]}),g&&u&&u.length>0&&(0,l.jsx)("div",{className:"flex items-center text-right mt-2",children:(0,l.jsx)("ul",{className:"list-none m-0 p-0",children:u.map((e,s)=>(0,l.jsxs)("li",{children:[w[e.dayOfWeek],": ",e.startTime," -"," ",e.endTime]},s))})})]}),(0,l.jsxs)("div",{className:" flex items-center justify-between mt-4 p-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(m.R_H,{size:32,className:"bg-green-500 rounded-lg p-1",color:"white"}),(0,l.jsx)("span",{className:"ml-2 font-semibold",children:"Стоимость"})]}),(0,l.jsxs)("div",{children:[t.price," руб."]})]})]})]})}}},function(e){e.O(0,[143,51,699,675,209,127,138,971,23,744],function(){return e(e.s=42462)}),_N_E=e.O()}]);